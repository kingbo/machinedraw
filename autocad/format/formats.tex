%%%%%%%%%% 定理类环境的定义 %%%%%%%%%% 
%% 必须在导入中文环境之后 
\newtheorem{example}{例}             % 整体编号 
\newtheorem{algorithm}{算法} 
\newtheorem{theorem}{定理}[section]  % 按 section 编号 
\newtheorem{definition}{定义} 
\newtheorem{axiom}{公理} 
\newtheorem{property}{性质} 
\newtheorem{proposition}{命题} 
\newtheorem{lemma}{引理} 
\newtheorem{corollary}{推论} 
\newtheorem{remark}{注解} 
\newtheorem{condition}{条件} 
\newtheorem{conclusion}{结论} 
\newtheorem{assumption}{假设} 
%\newtheorem{exercise}{\hspace{2em}习题}[chapter]

%%%%%%%%%% 一些重定义 %%%%%%%%%% 

%% 必须在导入中文环境之后 
\renewcommand{\contentsname}{目\quad 录}% 将 Contents 改为目录 
%\renewcommand{\abstractname}{摘\ \ 要} % 将 Abstract 改为摘要 
\renewcommand{\bibname}{参考文献}      % 将 References 改为参考文献 
\renewcommand{\indexname}{索\quad 引} %将Idex 改为索引
\renewcommand{\figurename}{图} 
\renewcommand{\tablename}{表} 
\renewcommand{\appendixname}{附\quad 录} 
\renewcommand{\proofname}{\hei 证明} 
\renewcommand{\algorithm}{\hei 算法} 
 
%%%%%%%%%% 重定义字号命令 %%%%%%%%%% 

\newcommand{\yihao}{\fontsize{26pt}{36pt}\selectfont}%一号, 1.4 倍行距 
\newcommand{\erhao}{\fontsize{22pt}{28pt}\selectfont}%二号, 1.25 倍行距 
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}%小二, 单倍行距 
\newcommand{\sanhao}{\fontsize{16pt}{24pt}\selectfont}%三号, 1.5 倍行距
\newcommand{\xiaosan}{\fontsize{15pt}{22pt}\selectfont}%小三, 1.5 倍行距 
\newcommand{\sihao}{\fontsize{14pt}{21pt}\selectfont}%四号, 1.5 倍行距 
\newcommand{\bansi}{\fontsize{13pt}{19.5pt}\selectfont}%半四, 1.5 倍行距 
\newcommand{\xiaosi}{\fontsize{12pt}{18pt}\selectfont}% 小四, 1.5 倍行距 
\newcommand{\dawu}{\fontsize{11pt}{11pt}\selectfont} % 大五, 单倍行距 
\newcommand{\wuhao}{\fontsize{10.5pt}{10.5pt}\selectfont}%五号, 单倍行距

\setcounter{secnumdepth}{4}%设置编号深度
%\setcounter{tocdepth}{4}%设置目录深度

%%%%%%%%%%%%%重定义章节的格式%%%%%%%%%%%%%%%%%%%
\renewcommand{\partname}{} 
\renewcommand{\thepart}{第\,\Roman{part}\,部分} 

\titlecontents{chapter}[1em]{\vspace{.5\baselineskip}\bfseries}
{第\thecontentslabel 章\quad}{}
{\hspace{.5em}\titlerule*[10pt]{$\cdot$}\contentspage}
\renewcommand{\chaptername}{第\,\thechapter \,章}

%%%%%%%%%%%%%%%设置章节样式%%%%%%%%%%%%%%%
\titleformat{\chapter}[block]
  {\normalfont\huge\bfseries}
  {\tikz\node[
      font=\huge\bfseries\color{white},
      fill=gray!50,
      rounded corners=20pt,
      minimum height=1.6cm,
      text width=3em,
      align=center,
      inner xsep=0pt] {\parbox{1.5em}{\thechapter\hfill}};%
  }
  {-1em}
  {\tikz\node[
      fill=gray,
      font=\LARGE\sffamily\color{white},
      minimum height=1.6cm,
      text width=\the\dimexpr\textwidth-2em\relax,
      align=center,inner xsep=0pt] {#1};%
  }
\titleformat{name=\chapter,numberless}[block]
  {\normalfont\huge\bfseries}
  {\tikz\node[
      font=\huge\bfseries\color{white},
      fill=gray!50,
      rounded corners=20pt,
      minimum height=1.6cm,
      text width=3em,
      align=center,
      inner xsep=0pt] {\parbox{1.5em}{\mbox{}\hfill}};%
  }
  {-1em}
  {\tikz\node[
      fill=gray,
      font=\LARGE\sffamily\color{white},
      minimum height=1.6cm,
      text width=\the\dimexpr\textwidth-2em\relax,
      align=center,
      inner xsep=0pt] {#1};%
  }
  
%\titleformat{\chapter}[hang]{\centering\huge\bfseries}{\chaptername}{1em}{}
\titlespacing{\chapter}{0pt}{*0}{*4}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{第\,\thechapter\,章\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}{}}

\titleformat{\section}[block]%              
    {\normalfont\Large\bfseries}%  
    { \tikz\node[
      font=\large\bfseries\color{white},
      fill=gray,
      rounded corners=1.5ex,
      minimum height=.9cm,
      text width=3em,
      align=center,
      inner xsep=0pt] {\parbox{1.5em}{\thesection\hfill}};}%                   
    {-.6em}%
    {\tikz\node[
      fill=gray!50,
      font=\large\sffamily\color{white},
      minimum height=.9cm,
      text width=\the\dimexpr\textwidth-3.5em\relax,
      %align=center,
      inner xsep=4pt] {#1};%
      }

\titleformat{name=\section,numberless}[block]%              
    {\normalfont\Large\bfseries}%  
    { \tikz\node[
      font=\large\bfseries\color{white},
      fill=gray,
      rounded corners=1.5ex,
      minimum height=.9cm,
      text width=3em,
      align=center,
      inner xsep=0pt] {\parbox{1.5em}{\mbox{}\hfill}};}%                   
    {-.6em}%
    {\tikz\node[
      fill=gray!50,
      font=\large\sffamily\color{white},
      minimum height=.9cm,
      text width=\the\dimexpr\textwidth-3.5em\relax,
      %align=center,
      inner xsep=4pt] {#1};%
      }

\titleformat{\subsection}[block]%              
    {\normalfont\large\bfseries}%  
    { \tikz\node[
      font=\normalsize\bfseries\color{white},
      fill=gray!50,
      rounded corners=1.5ex,
      minimum height=.75cm,
      text width=3.5em,
      %align=center,
      inner xsep=.8em] {\parbox{1.5em}{\thesubsection\hfill}};}%                   
    {-2em}%
    {\tikz\node[
      fill=gray,
      font=\normalsize\sffamily\color{white},
      minimum height=.75cm,
      text width=\the\dimexpr\textwidth-4.5em\relax,
      %align=center,
      inner xsep=4pt] {#1};%
      }

\titleformat{name=\subsection,numberless}[block]%              
    {\normalfont\large\bfseries}%  
    { \tikz\node[
      font=\normalsize\bfseries\color{white},
      fill=gray!50,
      rounded corners=1.5ex,
      minimum height=.75cm,
      text width=3.2em,
      align=center,
      inner xsep=0pt] {\parbox{1.5em}{\mbox{}\hfill}};}%                   
    {-2em}%
    {\tikz\node[
      fill=gray,
      font=\normalsize\sffamily\color{white},
      minimum height=.75cm,
      text width=\the\dimexpr\textwidth-4.5em\relax,
      %align=center,
      inner xsep=4pt] {#1};%
      }
%%%%%%%%%%%%定义页眉而脚%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\fancyhead[ER]{\leftmark}
\fancyhead[OL]{\rightmark}
\fancyhead[EL,OR]{$\cdot$\ \thepage\ $\cdot$}
\renewcommand{\headrulewidth}{0.4pt}
%=================== Enumerates Environment Settings==============================%
%=================================================================================%
%\setenumerate{label={\rm \arabic*.},leftmargin=0pt,labelindent=\parindent,labelsep=*,itemindent=1.75\parindent,itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}
%\setitemize{leftmargin=0pt,labelindent=\parindent,labelsep=*,itemindent=1.5\parindent,itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}
%%%%%%%%%%%%%设置列表格式%%%%%%%%%%%%%%%%

\setenumerate[1]{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}

\setitemize[1]{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}

\setdescription{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}

%%%%%%%%%%%定义过程列表%%%%%%%%%%%%%%%%%

\newcommand{\gorectangle}[1]{
\tikz\node[text width=3em,text=white,font=\sffamily\bfseries,inner sep=0.5mm,draw,rounded corners,fill=gray]{\small #1};}
\newcounter{procedurecounter}
\newenvironment{procedure}{
\begin{list}{\gorectangle{Step\,\arabic{procedurecounter}}}{
\setlength{\parsep}{\parskip}
\setlength{\itemsep}{0ex plus 0.1ex}
\setlength{\labelwidth}{2em}
\setlength{\labelsep}{.5em}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{0pt}
\setlength{\listparindent}{2em}
\setlength{\itemindent}{2em}
\usecounter{procedurecounter}
\setcounter{procedurecounter}{0}}}
{\end{list}}

\newcounter{yaodiancounter}
\tikzstyle{mybox} = [draw=black, fill=gray!20, very thick,
    rectangle, rounded corners, inner sep=10pt, inner ysep=20pt]
\tikzstyle{fancytitle} =[fill=gray, text=white]
\newcommand{\yaodian}[1]{
\addtocounter{yaodiancounter}{1}
\begin{tikzpicture}
\node [mybox] (box){%
    \begin{minipage}{0.75\textwidth}
       \lishu{#1}
    \end{minipage}
};
\node[fancytitle, right=10pt] at (box.north west) {\hei{要点\arabic{yaodiancounter}}};
\end{tikzpicture}
}
%源代码格式设置
\lstdefinelanguage{autocad}{
morekeywords={
3dalign, 
arc, arraypolay, arrayrect, align, 
block, break, blend, box, 
circle, chamfer, chamferedge, cylinder, copy, copyclip, cone, 
dimcontinue,  dimlinear, dimstyle, dimcont, dimlin, dimradius, dimdiameter, dimangular, 
erase, ellipse, explode, extend,  
fillet, filletedge, 
hatch, hatchedit,
insert, join, 
line,  layer, layoutwizard, linetype, 
move, mirror, mtext, mspace, mirror3d, 
new, 
offset, 
pagesetup, pspace, polygon, pline, pan, point, pasteclip, 
rectang, region, revolve, rotate,  
subtract, save, saveas, solprof,  soldraw, solview, scale, style, stretch, 
trim, text, 
ucs, union, 
view, vscurrent,     
wblock, wedge, 
xline,  
zoom,
}, 
sensitive=false, 
}
\lstloadlanguages{autocad}     % 所要粘贴代码的编程语言 
\lstset{
	language=autocad,
	tabsize=4, 
	keepspaces=true, 
    xleftmargin=2em,
    xrightmargin=2em, 
    aboveskip=1em, 
    backgroundcolor=\color{lightgray},  % 定义背景颜色 
    frame=none,                      % 表示不要边框 
    keywordstyle=\color{blue}\bfseries,    
    breakindent=22pt,
    stepnumber=1,
    numberstyle=\tiny, 
    basicstyle=\footnotesize, 
    showspaces=false, 
    flexiblecolumns=true, 
    breaklines=true, 
    breakautoindent=true,
    breakindent=4em, 
    escapeinside={/*@}{@*/} 
} 
\endinput